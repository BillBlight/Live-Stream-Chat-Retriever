  <!doctype html>
  <html>
    <head>
      <title>Live Stream Chat Retriever</title>
      <style>
        body {
            overflow: hidden;
            margin: 5px;
        }

        #chat_box {
            background-color: transparent;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            font-size: 13px;
            font-style: normal;
            font-variant: normal;
            font-weight: normal;
            position: absolute;
            overflow: hidden;
            color: #D3D3D3;
            border-radius: 4px;
            width: calc(100% - 10px);
        }

        .author {
            font-weight: bold;
        }

        .tag {
            display: inline-block;
            text-indent: 21px;
            background-position: 0 center;
            background-repeat: no-repeat;
            display: inline-block;
            vertical-align: bottom;
            height: 18px;
            min-width: 18px;
            width: expression(document.body.clientWidth < $width ? "18px":"auto");
            padding: 0;
            margin-right: 3px;
            margin-bottom: -1px;
            text-indent: -9999px;
            border-radius: 2px;
            -moz-border-radius: 2px;
            -webkit-border-radius: 2px;
            overflow: hidden;
        }

        .chat_line {
            margin-left: 3px;
            margin-right: 3px;
            padding-top: 2px;
            padding-bottom: 3px;
            line-height: 16px;
        }

        .chat_line .message {
            /*word-break: break-all;*/
            word-wrap: break-word;
        }

        .chat_line .time_stamp {
            padding-right: 3px;
        }
      </style>
    </head>
    <body>
      <div id="chat_box"></div>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
      <script>
        Chat = {
          initialize: function (url) {
            var socket = io(url);

            socket.on('message', function(data) {
              console.log('New message', data);
              Chat.insert(data)
            });
          },
          insert: function(data) {
            var $newLine = $('<div></div>');
            $newLine.addClass('chat_line');

            var $time = $('<span></span>');
            $time.addClass('time_stamp')
            $time.text(new Date().toLocaleTimeString().replace(/^(\d{0,2}):(\d{0,2}):(.*)$/i, '$1:$2'));
            $newLine.append($time);

            var $formattedUser = $('<span></span>');
            $formattedUser.addClass('author');
            $formattedUser.html(data.author);
            $newLine.append($formattedUser);
            $newLine.append('<span class="colon">:</span>&nbsp;');

            var $formattedMessage = $('<span></span>');
            $formattedMessage.addClass('message');

            $formattedMessage.html(data.message);
            $newLine.append($formattedMessage);

            $newLine.wrap('<div>').parent().html();

            $('#chat_box').append($newLine);
          }
        };



        Chat.initialize('http://localhost:4242');
      </script>
  </body>
</html>